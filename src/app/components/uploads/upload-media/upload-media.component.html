<div class="ct_right_panel">
      <h4 class="ct_fw_700 ct_fs_24 text-white">{{paramId ? 'Edit':'Upload'}} Media</h4>
      <form [formGroup]="form" (ngSubmit)="onSubmit(form)" class="mt-4">
            <div class="row">
                  <!-- Category & Sub Category -->

                  <div class="col-lg-6">
                        <div class="form-group mb-3">
                              <label for="" class="ct_fw_600 text-white mb-2">Category & Sub Category <span
                                          class="ct_red_star">*</span></label>
                              <div class="multi-select-container">
                                    <div class="form-control ct_input tag_input" (click)="toggleCatDropdown(true)">
                                          <ng-container *ngIf="selectedCatItems.length > 0; else default">
                                                <span *ngFor="let item of selectedCatItems" class="selected-item">
                                                      {{ item.categoryName }}
                                                      {{ item.subcategoryName ? '(' + item.subcategoryName +
                                                      (item.subSubCategoryName ? ' (' + item.subSubCategoryName + ')' :
                                                      '') + ')' : '' }}
                                                </span>
                                          </ng-container>
                                          <ng-template #default>
                                                Select
                                          </ng-template>
                                    </div>

                                    <div *ngIf="dropdownOpenCat" class="dropdown">
                                          <input type="text" class="ct_input ct_input_search" placeholder="Search..."
                                                [(ngModel)]="searchCatTerm" formControlName="category"
                                                (input)="filterCatOptions()" />
                                          <ng-container *ngFor="let category of filteredCatOptions">
                                                <div class="category-item">
                                                      <!-- Main Category Checkbox -->
                                                      <input class="form-check-input" type="checkbox"
                                                            [checked]="category.selected" [id]="category.category_name"
                                                            (change)="onCategoryChange(category, $event)" />
                                                      <label class="category_name" [for]="category.category_name">
                                                            {{ category.category_name }}
                                                      </label>

                                                      <!-- Subcategories -->
                                                      <ul *ngIf="category.subcategoryData?.length > 0"
                                                            class="subcategories">
                                                            <ng-container
                                                                  *ngFor="let subcategory of category.subcategoryData">
                                                                  <li class="sub_category_list">
                                                                        <input class="form-check-input" type="checkbox"
                                                                              [id]="subcategory.subcategory_name"
                                                                              [checked]="subcategory.selected"
                                                                              [disabled]="subcategory.disabled"
                                                                              (change)="onSubcategoryChange(category, subcategory, $event)" />
                                                                        <label [for]="subcategory.subcategory_name">
                                                                              {{ subcategory.subcategory_name }}
                                                                        </label>

                                                                        <!-- Sub-Subcategories -->
                                                                        <ul *ngIf="subcategory.sub_sub_category_data?.length > 0"
                                                                              class="sub_subcategories">
                                                                              <ng-container
                                                                                    *ngFor="let subsubcategory of subcategory.sub_sub_category_data">
                                                                                    <li class="sub_sub_category_list">
                                                                                          <input class="form-check-input"
                                                                                                type="checkbox"
                                                                                                [id]="subsubcategory.sub_sub_categoryName"
                                                                                                [checked]="subsubcategory.selected"
                                                                                                [disabled]="subsubcategory.disabled"
                                                                                                (change)="onSubSubcategoryChange(category, subcategory, subsubcategory, $event)" />
                                                                                          <label
                                                                                                [for]="subsubcategory.sub_sub_categoryName">
                                                                                                {{
                                                                                                subsubcategory.sub_sub_categoryName
                                                                                                }}
                                                                                          </label>
                                                                                    </li>
                                                                              </ng-container>
                                                                        </ul>
                                                                  </li>
                                                            </ng-container>
                                                      </ul>
                                                </div>
                                          </ng-container>

                                          <div *ngIf="filteredCatOptions?.length == 0 || !filteredCatOptions"
                                                class="text-center">
                                                <p class="ct_fs_15 text-white">No items found</p>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </div>

                  <div class="col-lg-6">
                        <div class="form-group mb-3">
                              <label for="" class="ct_fw_600 text-white mb-2">
                                    Tags <span class="ct_red_star">*</span>
                              </label>
                              <div class="multi-select-container">
                                    <div class="form-control ct_input tag_input" (click)="toggleDropdown(true)">
                                          <ng-container *ngIf="selectedItems.length > 0; else default">
                                                <span *ngFor="let item of selectedItems" class="selected-item">
                                                      {{ item.tag_name }}
                                                      <ng-container *ngIf="item.subtag_name.length > 0">
                                                            ({{ item.subtag_name.join(', ') }})
                                                      </ng-container>
                                                      <span class="remove-item" (click)="removeItem(item)">x</span>
                                                </span>
                                          </ng-container>
                                          <ng-template #default>
                                                Select
                                          </ng-template>
                                    </div>
                                    <div *ngIf="dropdownOpen" class="dropdown">
                                          <input type="text" class="ct_input ct_input_search" formControlName="tags"
                                                placeholder="Search..." [(ngModel)]="searchTerm"
                                                (input)="filterOptions()" />
                                          <ul class="category-item">
                                                <li *ngFor="let option of filteredOptions" class="tag_list">
                                                      <input class="form-check-input" type="checkbox" [id]="option.tag"
                                                            [checked]="option.selected"
                                                            (change)="onTagChange(option, $event)" />
                                                      <label [for]="option.tag">{{ option.tag }}</label>
                                                      <ul *ngIf="option.subTagData?.length > 0">
                                                            <li *ngFor="let subTag of option.subTagData"
                                                                  class="sub_category_list">
                                                                  <input class="form-check-input" type="checkbox"
                                                                        [id]="subTag.sub_tagName"
                                                                        [checked]="subTag.selected"
                                                                        (change)="onSubTagChange(option, subTag, $event)" />
                                                                  <label [for]="subTag.sub_tagName">{{
                                                                        subTag.sub_tagName }}</label>
                                                            </li>
                                                      </ul>
                                                </li>
                                                <div *ngIf="filteredOptions?.length === 0" class="text-center">
                                                      <p class="ct_fs_15 text-white">No items found</p>
                                                </div>
                                          </ul>
                                    </div>
                              </div>
                        </div>
                  </div>

                  <div class="col-lg-6">
                        <ng-container *ngIf="!uploadedImage; else preview">
                              <div class="form-group mb-3">
                                    <label for="" class="ct_fw_600 text-white mb-2">Media <span
                                                class="ct_red_star">*</span></label>
                                    <input type="file" class="form-control ct_input"
                                          accept="image/jpeg, image/jpg, image/png, image/gif, video/mp4, video/mov, video/avi, video/x-matroska"
                                          (change)="ngFileInputChange($event)" formControlName="name">
                              </div>
                        </ng-container>
                        <ng-template #preview>
                              <div class="mb-2 position-relative w-fit">
                                    <img [src]="uploadedImage" alt="Uploaded Image" class="img-thumbnail"
                                          style="max-width: 150px;">
                                    <i class="fa fa-times-circle close_btn" aria-hidden="true"
                                          (click)="uploadedImage = null"></i>
                              </div>
                        </ng-template>
                  </div>
            </div>
            <div class="mt-4">
                  <button type="submit" class="ct_blue_btn">Save</button>
            </div>
      </form>
</div>
<div *ngIf="dropdownOpenCat || dropdownOpen" class="overlay" (click)="closeAll()"></div>












<!-- <div class="ct_right_panel">
      <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" id="categoryDropdown"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  Select Categories
            </button>
            <ul class="dropdown-menu" aria-labelledby="categoryDropdown">
                  <li>
                        <ng-container *ngFor="let category of categories">
                              <div class="category-item">
                                    <input type="checkbox" [checked]="category.selected" [id]="category.name"
                                          (change)="onCategoryChange(category, $event)" />
                                    <label [for]="category.name">{{ category.name }}</label>
                                    <ul *ngIf="category.children && category.children.length > 0" class="subcategories">
                                          <ng-container *ngFor="let subcategory of category.children">
                                                <li>
                                                      <input type="checkbox" [checked]="subcategory.selected"
                                                            (change)="onSubcategoryChange(category, subcategory, $event)" />
                                                      <label>{{ subcategory.name }}</label>
                                                </li>
                                          </ng-container>
                                    </ul>
                              </div>
                        </ng-container>
                  </li>
            </ul>
      </div>
</div> -->